@using WebPortal.Models.CompShop

@{
    Layout = "_LayoutCompShop";
}

@model AddPageViewModel


@section StyleCompShop {
    <link rel="stylesheet" href="~/css/CompShop/add.css" />
}

<body>

    <div class="container">
        <div class="add-form">
            <div class="help">
                <p>* Заполните форму, чтобы добавить компьютер, ноутбук или телефон в каталог *</p>
            </div>

            <form action="/CompShop/add" method="post">
                <div class="panel">

                    <div class="form-group">
                        @Html.LabelFor(x => x.DeviceViewModel.Name)
                        @Html.TextBoxFor(x => x.DeviceViewModel.Name, new { placeholder = "Например: MacBook Pro 16", @class = "input" })
                        @Html.ValidationMessageFor(x => x.DeviceViewModel.Name)
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(x => x.DeviceViewModel.Description)
                        @Html.TextBoxFor(x => x.DeviceViewModel.Description, new { placeholder = "Игровой комьютер с мощной видеокартой...", @class = "input" })
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(x => x.DeviceViewModel.Image)
                        @Html.TextBoxFor(x => x.DeviceViewModel.Image, new { placeholder = "https://...", @class = "input" })
                        @Html.ValidationMessageFor(x => x.DeviceViewModel.Image)
                    </div>


                    <div class="form-group">
                        @Html.LabelFor(x => x.DeviceViewModel.CategoryId)
                        @Html.DropDownListFor(x => x.DeviceViewModel.CategoryId, Model.Categoryes)
                        @Html.ValidationMessageFor(x => x.DeviceViewModel.CategoryId)
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(x => x.DeviceViewModel.TypeDeviceId)
                        @Html.DropDownListFor(x => x.DeviceViewModel.TypeDeviceId, Model.TypeDevices)
                        @Html.ValidationMessageFor(x => x.DeviceViewModel.TypeDeviceId)
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(x => x.DeviceViewModel.IsPopular)
                        <select name="DeviceViewModel.IsPopular" class="input" required>
                            <option value="false">Нет</option>
                            <option value="true">Да</option>
                        </select>
                    </div>


                    <div class="form-group">
                        @Html.LabelFor(x => x.DeviceViewModel.Price)
                        @Html.TextBoxFor(x => x.DeviceViewModel.Price, new { placeholder = "9999", @class = "input", type = "number", min = "0", step = "0.01" })
                        @Html.ValidationMessageFor(x => x.DeviceViewModel.Price)
                    </div>


                    <div class="form-group" id="parametersSection" style="display: none;">
                        <div id="dynamicParams"></div>
                    </div>

                    <div class="computer-dop">
                        <div class="form-group">
                            <label for="Processor">Процессор</label>
                            @Html.TextBoxFor(x => x.ComputerViewModel.Processor, new { placeholder = "Intel Core i7-13700K", @class = "input", type = "text" })
                        </div>

                        <div class="form-group">
                            <label for="Ram">ОЗУ (ГБ)</label>
                            @Html.TextBoxFor(x => x.ComputerViewModel.Ram, new { placeholder = "32", @class = "input", type = "number" })
                        </div>

                        <div class="form-group">
                            <label for="Memory">Накопитель (ГБ)</label>
                            @Html.TextBoxFor(x => x.ComputerViewModel.Memory, new { placeholder = "1024", @class = "input", type = "number" })
                        </div>

                        <div class="form-group">
                            <label for="VideoCard">Видеокарта</label>
                            @Html.TextBoxFor(x => x.ComputerViewModel.VideoCard, new { placeholder = "NVIDIA RTX 4070", @class = "input" })
                        </div>

                        <div class="form-group">
                            <label for="Motherboard">Материнская плата</label>
                            @Html.TextBoxFor(x => x.ComputerViewModel.Motherboard, new { placeholder = "ASUS TUF B760", @class = "input" })
                        </div>

                        <div class="form-group">
                            <label for="PowerUnit">Блок питания</label>
                            @Html.TextBoxFor(x => x.ComputerViewModel.PowerUnit, new { placeholder = "650W 80+ Bronze", @class = "input" })
                        </div>
                    </div>

                    <button type="submit">Добавить товар</button>
                </div>
            </form>
        </div>

    </div> <!-- container  -->
</body>

<script>
   /* const deviceParams = {
        '1': [
            { name: 'Processor', label: 'Процессор', type: 'text', placeholder: 'Intel Core i7-13700K' },
            { name: 'Ram', label: 'ОЗУ (ГБ)', type: 'number', placeholder: '32' },
            { name: 'Storage', label: 'Накопитель (ГБ)', type: 'number', placeholder: '1024' },
            { name: 'GraphicsCard', label: 'Видеокарта', type: 'text', placeholder: 'NVIDIA RTX 4070' },
            { name: 'Motherboard', label: 'Материнская плата', type: 'text', placeholder: 'ASUS TUF B760' },
            { name: 'PowerSupply', label: 'Блок питания', type: 'text', placeholder: '650W 80+ Bronze' }
        ],
    };

    function updateCategoryFields() {
        const categoryId = document.getElementById('DeviceViewModel_CategoryId').value;
        const container = document.getElementById('dynamicParams');
        const section = document.getElementById('parametersSection');
        const title = document.getElementById('paramTitle');

        container.innerHTML = '';
        section.style.display = 'none';

        if (categoryId && deviceParams[categoryId]) {
            section.style.display = 'block';

            const params = deviceParams[categoryId];
            params.forEach(field => {
                const group = document.createElement('div');
                group.className = 'form-group';

                const label = document.createElement('label');
                label.textContent = field.label;
                label.htmlFor = field.name;

                const input = document.createElement('input');
                input.type = field.type;
                input.name = field.name;
                input.id = field.name;
                input.placeholder = field.placeholder;
                input.className = 'input';

                if (field.type === 'number') {
                    input.min = '0';
                    input.step = field.type === 'number' && !field.placeholder.includes('.') ? '1' : '0.01';
                }

                group.appendChild(label);
                group.appendChild(input);
                container.appendChild(group);
            });
        }
    }

    document.getElementById('DeviceViewModel_CategoryId').addEventListener('change', updateCategoryFields);

    document.addEventListener('DOMContentLoaded', function () {
        const select = document.getElementById('DeviceViewModel_CategoryId');
        if (select.value) {
            updateCategoryFields();
        }
    });*/

</script>
