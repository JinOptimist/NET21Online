@using WebPortal.Models.SpaceStation
@using WebPortal.Localizations
@model List<SpaceNewsViewModel>
@{
    Layout = "_LayoutSpaceStation";
}
@section Scripts {
    <script src="/js/spaceStation/index.js"></script>
}
<div class="welcome-section">
    <h2>@SpaceNews.Index_Welcome @ViewBag.UserName!</h2>
    <p>@SpaceNews.Index_Date @ViewBag.CurrentDate.ToString("MMMM dd, yyyy HH:mm")</p>
    @if (ViewBag.LastVisit != null)
    {
        <p>@SpaceNews.Index_Last_Visit @(((DateTime)ViewBag.LastVisit).ToString("MMMM dd, yyyy HH:mm"))</p>
    }
    else
    {
        <p>@SpaceNews.Index_First_Visit</p>
    }
</div>

<div class="iss-tracker-section">
    <h2>Отслеживание МКС</h2>

    <div class="iss-map">
        <iframe width="100%" height="270" src="https://isstracker.pl/widget/map?disableInfoBox=1&amp;" scrolling="no" frameborder="0" style="border: none; background: transparent;"></iframe>
    </div>

    <div class="iss-data">
        <div class="iss-position">
            <h3>Текущая позиция МКС</h3>
            <p>Широта: <span id="iss-latitude">-</span></p>
            <p>Долгота: <span id="iss-longitude">-</span></p>
            <p>Высота: <span id="iss-altitude">-</span> км</p>
            <p>Скорость: <span id="iss-velocity">-</span> км/ч</p>
        </div>
        <div class="iss-distance">
            <h3>Расстояние до МКС</h3>
            <div class="distance-input">
                <button id="get-location">Определить мое местоположение</button>
                <div id="location-status" class="location-status"></div>
            </div>
            <p>Расстояние: <span id="distance-result">-</span> км</p>
        </div>
    </div>
</div>

<div class="content-wrapper">
    <div class="news-section">
        <h1>@SpaceNews.Index_Main_Phrase</h1>

        <div class="news from-min-Api">
            <div class="news-item template">
                <img class="news-image">
                <h3 class="news-title"></h3>
                <p class="news-content"></p>
            </div>
        </div>



        <div class="news-container">
            @if (Model != null && Model.Count > 0)
            {
                foreach (var spaceNews in Model)
                {
                    <div class="news-item">
                        <img src="@spaceNews.ImageUrl" alt="News image" class="news-image">
                        <div class="news-text" data-id="@spaceNews.Id">
                            @if (spaceNews.CanRemove)
                            {
                                <span class="view mode"><h3>@spaceNews.Title</h3></span>
                                <input class="edit mode hidden" value="@spaceNews.Title" title="title" />
                            }
                            else
                            {
                                <span class=""><h3>@spaceNews.Title</h3></span>
                            }
                            <p>@spaceNews.Content</p>
                            <small>@spaceNews.DateAdded</small>
                            <small>@spaceNews.AuthorName</small>
                            @if (!string.IsNullOrEmpty(spaceNews.SourceUrl))
                            {
                                <div class="document-section">
                                    <p>Нажмите на ссылку, чтобы скачать файл:</p>
                                    <a href="@spaceNews.SourceUrl" download>
                                        Скачать документ
                                    </a>
                                </div>
                            }
                            @if (spaceNews.CanRemove)
                            {
                                <form action="/SpaceStation/remove" method="post" style="display:inline;">
                                    <input type="hidden" name="id" value="@spaceNews.Id" />
                                    <button type="submit" class="btn-link">@SpaceNews.Index_Button_Delete</button>
                                </form>
                            }
                        </div>
                    </div>
                }
            }
            else
            {
                <p class="no-news">@SpaceNews.Index_No_News</p>
            }
        </div>
    </div>
</div>