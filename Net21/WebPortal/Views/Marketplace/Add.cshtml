@model WebPortal.Models.Marketplace.MarketplaceProductAddViewModel

@{
    ViewData["Title"] = "Добавить товар";
}

<div class="container mt-4">
    <div class="card">
        <div class="card-header bg-primary text-white">
            <h2 class="mb-0">Добавить новый товар</h2>
        </div>
        <div class="card-body">
            <form action="/Marketplace/Add" method="post">
                @Html.ValidationSummary(true, "", new { @class = "alert alert-danger" })
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            @Html.DropDownListFor(x => x.ProductType, new SelectList(Model.AvailableProductTypes), 
                                "-- Выберите тип --", 
                                new { @class = "form-select" + (ViewData.ModelState["ProductType"]?.Errors?.Count > 0 ? " is-invalid" : ""), 
                                      id = "productType" })
                            @Html.ValidationMessageFor(x => x.ProductType, null, new { @class = "text-danger" })
                        </div>

                        <div class="mb-3">
                            @Html.TextBoxFor(x => x.Name, 
                                new { @class = "form-control" + (ViewData.ModelState["Name"]?.Errors?.Count > 0 ? " is-invalid" : ""), 
                                      placeholder = "Название товара" })
                            @Html.ValidationMessageFor(x => x.Name, null, new { @class = "text-danger" })
                        </div>

                        <div class="mb-3">
                            @Html.TextBoxFor(x => x.Brand, 
                                new { @class = "form-control" + (ViewData.ModelState["Brand"]?.Errors?.Count > 0 ? " is-invalid" : ""), 
                                      placeholder = "Бренд" })
                            @Html.ValidationMessageFor(x => x.Brand, null, new { @class = "text-danger" })
                        </div>

                        <div class="mb-3">
                            <div class="input-group">
                                @Html.TextBoxFor(x => x.Price, 
                                    new { @class = "form-control" + (ViewData.ModelState["Price"]?.Errors?.Count > 0 ? " is-invalid" : ""), 
                                          type = "number", step = "0.01", placeholder = "Цена" })
                                <span class="input-group-text">₽</span>
                            </div>
                            @Html.ValidationMessageFor(x => x.Price, null, new { @class = "text-danger" })
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="mb-3">
                            @Html.TextAreaFor(x => x.Description, 
                                new { @class = "form-control" + (ViewData.ModelState["Description"]?.Errors?.Count > 0 ? " is-invalid" : ""), 
                                      rows = "3", placeholder = "Описание товара" })
                            @Html.ValidationMessageFor(x => x.Description, null, new { @class = "text-danger" })
                        </div>

                        <div class="mb-3">
                            @Html.TextBoxFor(x => x.ImageUrl, 
                                new { @class = "form-control" + (ViewData.ModelState["ImageUrl"]?.Errors?.Count > 0 ? " is-invalid" : ""), 
                                      type = "url", placeholder = "URL изображения" })
                            @Html.ValidationMessageFor(x => x.ImageUrl, null, new { @class = "text-danger" })
                            <div class="form-text">Оставьте пустым для изображения по умолчанию</div>
                        </div>
                    </div>
                </div>
                <div id="laptopFields" class="product-specs mt-3 p-3 bg-light rounded" style="display: none;">
                    <h5 class="mb-3"><i class="fas fa-laptop"></i> Характеристики ноутбука</h5>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            @Html.TextBoxFor(x => x.Processor, 
                                new { @class = "form-control" + (ViewData.ModelState["Processor"]?.Errors?.Count > 0 ? " is-invalid" : ""), 
                                      placeholder = "Процессор" })
                            @Html.ValidationMessageFor(x => x.Processor, null, new { @class = "text-danger" })
                        </div>
                        <div class="col-md-4 mb-3">
                            @Html.TextBoxFor(x => x.RAM, 
                                new { @class = "form-control" + (ViewData.ModelState["RAM"]?.Errors?.Count > 0 ? " is-invalid" : ""), 
                                      type = "number", placeholder = "Оперативная память (ГБ)" })
                            @Html.ValidationMessageFor(x => x.RAM, null, new { @class = "text-danger" })
                        </div>
                        <div class="col-md-4 mb-3">
                            @Html.TextBoxFor(x => x.OS, 
                                new { @class = "form-control" + (ViewData.ModelState["OS"]?.Errors?.Count > 0 ? " is-invalid" : ""), 
                                      placeholder = "Операционная система" })
                            @Html.ValidationMessageFor(x => x.OS, null, new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
                <div id="smartphoneFields" class="product-specs mt-3 p-3 bg-light rounded" style="display: none;">
                    <h5 class="mb-3"><i class="fas fa-mobile"></i> Характеристики смартфона</h5>
                    <p>Характеристики для смартфонов будут добавлены позже</p>
                </div>

                <div id="smartwatchFields" class="product-specs mt-3 p-3 bg-light rounded" style="display: none;">
                    <h5 class="mb-3"><i class="fas fa-clock"></i> Характеристики умных часов</h5>
                    <p>Характеристики для умных часов будут добавлены позже</p>
                </div>

                <div id="headphonesFields" class="product-specs mt-3 p-3 bg-light rounded" style="display: none;">
                    <h5 class="mb-3"><i class="fas fa-headphones"></i> Характеристики наушников</h5>
                    <p>Характеристики для наушников будут добавлены позже</p>
                </div>

                <div class="mt-4">
                    <button type="submit" class="btn btn-primary px-4">
                        <i class="fas fa-save"></i> Сохранить
                    </button>
                    <a href="@Url.Action("Catalog")" class="btn btn-outline-secondary ms-2">
                        <i class="fas fa-times"></i> Отмена
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/marketplace/add.js"></script>
}